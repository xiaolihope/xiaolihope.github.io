本文介绍KVM动态内存# KVM 动态内存## 1.KVM内存气球技术KVM的内存气球技术使虚拟机可以按照需要调整内存大小，从而提高宿主机内存的利用率。使用的时候，默认情况是需要安装virt balloon的驱动，内核开启CONFIG_VIRTIO_BALLOON。CentOS7默认已经开启了此选项，并且也安装了virtballoon驱动。## 2.类型膨胀：虚拟机的内存被拿掉给宿主机压缩：宿主机的内存还给虚拟机气球技术最大优点是内存可以超用，缺点是可能造成内存不够用而影响性能### 3. 相关操作查看当前宿主机下虚拟机的内存大小:```# virsh qemu-monitor-command win7 --hmp --cmd info balloon``` 修改当前宿主机下虚拟机的内存大小```# virsh qemu-monitor-command CentOS-7.3-x86_64.raw --hmp --cmd balloon 102457c3a44e-e949-455c-962e-97876a07c7d3```### 4.window查看内存信息wmic memorychip可以显示出内存条数、容量和速度。systeminfo 查看物理内存， 可用物理内存# windows 下查看uuid```C:/ > wmicwmic:root\cli> csproduct list full```### 5 . 虚拟机配置文件路径	`/var/run/libvirt/qemu/xxx.xml` or `/etc/libvirt/qemu/xxx.xml``virsh  dominfo <虚拟机name>` 查看指定虚拟机的信息### 6. 方案- 方案 1```# start 都为 True 默认开启方案一{    "number": "first",    "start": "True",    "setting":[        {            "range":[0, 0.3],            "rate": 0.5            "step":0        },        {            "range":[0.3, 0.5],            "rate": 0.8            "step":1        },        {            "range":[0.5, 1],            "rate": 1            "step":2        }    ]}```- 方案 2```{    "number": "first",    "start": "False",    "setting":[        {            "range":[0, 0.3],            "rate": 0.6            "step":0        },        {            "range":[0.3, 0.5],            "rate": 0.9            "step":1        },        {            "range":[0.5, 1],            "rate": 1            "step":2        }    ]}```